<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>torpedo_test/IterativeSegmentation/Segmentation/LabSegmentation</title></head><link rel="StyleSheet" href="slwebview.css" type="text/css"><script type="text/javascript" src="id_mapping.js"></script><script type="text/javascript" src="slwebview.js"></script><script type="text/javascript" src="slwebview_utils.js"></script><script type="text/javascript" src="slhtmltoolbar.js"></script><body onload="addToolbar('toolbarDiv');"><table><tr><td><div id="toolbarDiv" style="display:inline"></div></td><td class="content" style="vertical-align:middle">LabSegmentation</td></tr></table><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd"><span style="color:blue">function</span> LabelMatrix  = LabSegmentation(L,a,b,ref_colors,num_colors)
<span style="color:green">% This function generates the label matrix</span>

[rows cols] = size(L);

Lout = zeros(rows,cols);
aout = zeros(rows,cols);
bout = zeros(rows,cols);

LabelMatrix = zeros(rows,cols);

<span style="color:blue">for</span> i = 1:rows
    <span style="color:blue">for</span> j = 1:cols
        min_dist = 1000;
        index = 1;
        <span style="color:blue">for</span> k = 1:num_colors
            dist = sqrt((ref_colors(k,1) - L(i,j))^2 + (ref_colors(k,2) - a(i,j))^2 + (ref_colors(k,3) - b(i,j))^2);
            <span style="color:blue">if</span>(dist &lt; min_dist)
                min_dist = double(dist);
                index = k;
            <span style="color:blue">end</span>
        <span style="color:blue">end</span>
        LabelMatrix(i,j) = index;
    <span style="color:blue">end</span>
<span style="color:blue">end</span>

<span style="color:blue">for</span> i = 1:rows
    <span style="color:blue">for</span> j = 1:cols
        Lout(i,j) = ref_colors(LabelMatrix(i,j),1);
        aout(i,j) = ref_colors(LabelMatrix(i,j),2);
        bout(i,j) = ref_colors(LabelMatrix(i,j),3);
    <span style="color:blue">end</span>
<span style="color:blue">end</span>

cow = 1;

<span style="color:blue">return</span>
</pre></body></html>