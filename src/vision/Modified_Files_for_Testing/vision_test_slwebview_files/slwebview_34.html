<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>linedetect_v1_test/Are 3 Lines Present1</title></head><link rel="StyleSheet" href="slwebview.css" type="text/css"><script type="text/javascript" src="id_mapping.js"></script><script type="text/javascript" src="slwebview.js"></script><script type="text/javascript" src="slwebview_utils.js"></script><script type="text/javascript" src="slhtmltoolbar.js"></script><body onload="addToolbar('toolbarDiv');"><table><tr><td><div id="toolbarDiv" style="display:inline"></div></td><td class="content" style="vertical-align:middle">Are 3 Lines Present1</td></tr></table><pre xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd"><span style="color:blue">function</span> [Image,T,R] = AreLinesPresent(HoughTable,Theta,Rho)
<span style="color:green">% This function is meant to see if there are 3 lines which approximate a</span>
<span style="color:green">% 'hedge' in the current frame</span>

R = zeros(1,2);
T = zeros(1,2);
[rhos, thetas] = size(HoughTable);

<span style="color:green">% Find the two vetical lines</span>
theta_0_col = floor(thetas/2);

most_votes = 0;
second_most = 0;
indexi1 = 1;
indexi2 = 1;
indexj1 = 1;
indexj2 = 1;


<span style="color:blue">for</span> i = 1:rhos
    <span style="color:blue">for</span> j = theta_0_col-5:theta_0_col+5
        <span style="color:blue">if</span>(HoughTable(i,j) &gt; most_votes)
<span style="color:green">            %{
</span><span style="color:green">            if(abs(Rho(indexi1)-Rho(i)) &gt; 20)
</span><span style="color:green">                second_most = HoughTable(indexi1,indexj2);
</span><span style="color:green">                indexi2 = indexi1;
</span><span style="color:green">                indexj2 = indexj1;
</span><span style="color:green">                R(2) = R(1);
</span><span style="color:green">                T(2) = T(1);
</span><span style="color:green">            end
</span><span style="color:green">            %}
</span>            most_votes = HoughTable(i,j);
            indexi1 = i;
            indexj1 = j;
            R(1) = Rho(i);
            T(1) = Theta(j);
<span style="color:green">        %{
</span><span style="color:green">elseif(HoughTable(i,j) &gt; second_most &amp;&amp; abs(Rho(indexi1)-Rho(i)) &gt; 20)
</span><span style="color:green">            second_most = HoughTable(i,j);
</span><span style="color:green">            indexi2 = i;
</span><span style="color:green">            indexj2 = j;
</span><span style="color:green">            R(2) = Rho(i);
</span><span style="color:green">            T(2) = Theta(j);
</span><span style="color:green">%}
</span>        <span style="color:blue">end</span>
    <span style="color:blue">end</span>
<span style="color:blue">end</span>

<span style="color:green">% Find the horizontal line</span>
max_votes = 0;
index = [0 0];
<span style="color:blue">for</span> i = 1:rhos
    <span style="color:blue">for</span> j = 1:10
        <span style="color:blue">if</span>(HoughTable(i,j) &gt; max_votes)
            max_votes = HoughTable(i,j);
            index = [i,j];
            R(2) = Rho(i);
            T(2) = Theta(j);
        <span style="color:blue">end</span>
    <span style="color:blue">end</span>
    <span style="color:blue">for</span> j = thetas-10:thetas
        <span style="color:blue">if</span>(HoughTable(i,j) &gt; max_votes)
            max_votes = HoughTable(i,j);
            index = [i,j];
            R(2) = Rho(i);
            T(2) = Theta(j);
        <span style="color:blue">end</span>
    <span style="color:blue">end</span>
<span style="color:blue">end</span>

<span style="color:green">% Find the most prominent line</span>
top_vote = 0;
t = 0;
r = 0;
<span style="color:blue">for</span> i = 1:rhos
    <span style="color:blue">for</span> j = 1:thetas
        <span style="color:blue">if</span>(HoughTable(i,j) &gt; top_vote)
            top_vote = HoughTable(i,j);
            t = j;
            r = i;
        <span style="color:blue">end</span>
    <span style="color:blue">end</span>
<span style="color:blue">end</span>

Image = 0;
<span style="color:blue">if</span>(top_vote*.75 &lt; max_votes &amp;&amp; top_vote*.3 &lt; most_votes &amp;&amp; top_vote*.3 &lt; second_most)
    Image = 1;
<span style="color:blue">end</span>

cow = 1;

<span style="color:blue">return</span>
</pre></body></html>